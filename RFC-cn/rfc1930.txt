组织：中国互动出版网（http://www.china-pub.com/）
RFC文档中文翻译计划（http://www.china-pub.com/compters/emook/aboutemook.htm）
E-mail：ouyang@china-pub.com
译者：邵毅（epl   shaoyi@163.net）
译文发布时间：2001-4-13
版权：本中文翻译文档版权归中国互动出版网所有。可以用于非商业用途自由转载，但必须保留本文档的翻译及版权信息。


Network Working Group                          J. Hawkinson
Request for Comments: 1930                     BBN Planet
BCP: 6                                         T. Bates
Category: Best Current Practice                   MCI
 May 1996

自治系统的创建、选择与注册指南
(Guidelines for creation, selection, and registration of an Autonomous System (AS))

本备忘录状态
   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

摘要
这一文档讨论注册与使用一个自治系统的合适时机，并给出了相关规则。自治系统是外部路由中路由策略的单元，并且明确使用与诸如EGP（外部网关协议）、BG（边界网关协议）和IDRP（OSI的域内路由协议）等。应该指出的是，一个自治系统的IDRP与RDI（路由域标识符）等价。
目录

1 介绍	2
2 动机	2
3 定义	2
4 分配自治系统时的常见错误	4
5 决策规则--我需要一个自治系统吗？	4
5.1 简单实例	5
5.2 其它因素	5
6 思考	6
7 一个前缀，一个初始自治系统	6
8 IGP问题	6
9 自治系统的空间开销	6
10 保留的自治系统号	6
11 安全性考虑	7
12 致谢	7
13 参考文献	7
作者的地址	8




1 介绍
这一备忘录对注册以及使用一个自治系统的时机进行讨论，并为之列出相应标准。自治系统是现时环境中外部路由的路由策略单元，特别适用于EGP、BGP和IDRP等协议。（注：EGP，外部网关协议，见[EGP]；BGP，边界网关协议，目前自治系统内部的实际标准，见[BGP]；IDRP，OSI的域内路由协议，BGP协议废除后可能被采用，见[IDRP]。）应该指出的是，一个自治系统中IDRP等价于RDI，即路由域标识符。
2 动机
本备忘录是面向那些需要对在何种情况下应利用自治系统加以理解的网络操作者和服务提供者。本文的读者应熟悉路由协议，并将要进行配置和操作国际互联网络的工作。不幸的是，当今人们对如何使用自治系统仍争论不休。本备忘录尝试在澄清一些认识的同时，充当目前外部路由的一个简单的指南。

3 定义
本文广泛引用了"前缀"一词（见[CIDR]）。在当前这种不分类的因特网中，只要一块网络以二次幂边界开始及结束，则任意一块A类，B类或C类网络都可以仅通过一个前缀和一个掩码来表示。
例如：网络
192.168.0.0/24
192.168.1.0/24
192.168.2.0/24
192.168.3.0/24
可以被简单的表示为：
192.168.0.0/22
"前缀"一词在此与"CIDR块"等价。我们可以把它简单地认为是一组单个或多个网络。我们使用"网络"一词来表示分类网络，如"网络A、B、C"等。

自治系统的定义一度非常混乱。
[BGP-4]指出：
典型的自治系统定义为：一个自治系统是一组由单一技术管理的路由器。它使用内部网关协议及通用规则在系统内发送包，使用外部网关协议向其它自治系统发送包。这一典型定义的提出使得在一个自治系统中出现多个内部网关协议以及多套规则的现象变得非常普及。这里使用自治系统这一词是为了强调"即使当采用多IGP和规则的时候，一个自治系统的管理相对于其它自治系统而言，有一个唯一的内部路由方案，并且其展现出可达网络的景象是一致的。"这一事实。
我们可以将其简单地改述为：
一个自制系统是相互关联的一组由一个或多个网络操作者运行的一个或多个IP前缀。这些网络操作拥有唯一的或明确定义的路由规则。
这一路由规则被定义为当今在因特网上如何安排决策的方法。自治系统间路由信息的交换需要遵守路由规则。考虑两个互换路由信息的自治系统X与Y：
NET1 ......  ASX  <--->  ASY  ....... NET2
自治系统X知道如何到达成为NET1的前缀。NET1属于自治系统X，还是属于其它与自治系统X进行直接或间接路由信息交换的自治系统是无关紧要的问题。我们假定自制系统X知道如何将数据包指向NET1，同样的，自治系统Y也知道如何到达NET2。
为了连通NET1和NET2，使数据在自治系统X和自治系统Y之间流动，自治系统X需要定义从NET1到自治系统Y需使用外部网关协议。这意味着自治系统X将要接受从自治系统Y指向NET1的通讯信息。当自治系统X决定要向自治系统Y通知NET1时，必需遵守规则。
为了传送信息，自治系统Y必需接受并使用这些路由信息。自治系统Y具有选择是否使用来自自治系统X的信息。自治系统Y必需确定当它不希望向NET1发送信息，或者考虑采用另外一个到达NET1更加合适的路线时，可不用上述信息进行决策。
为了使自治系统X和自治系统Y之间的数据沿着NET1的方向流动，自治系统X必须宣布从自治系统Y到自治系统X的路由必须是从自治系统X得到。
NET1向信息包
<<===================================
|
|
通知  NET1  |  接受 NET1
-------------> + ------------->
|
自治系统 X   |   自治系统 Y
|
<-------------- + <--------------
接受 NET2  |  通知 NET2
|
|
NET1向信息包
===================================>>
理想状态下，自治系统X与自治系统Y之间的通知和接受策略是对称的。
为了驱动NET2向的数据包，NET2的通知和接受必需恰当（NET1的镜像）。对于几乎所有的应用而言，只具有一个方向的连通性几乎无任何用途。
应该指出的是，在大多数较之复杂的拓扑结构中，从NET1到NET2的通信并不一定与从NET2到NET1相同。这被称为不对称路由。虽然不对称路由并不是一定不好，但它却经常造成如TCP等高级协议的操作问题，应小心使用，最好只用于非用不可的时候。然而，对于如卫星和调制解调器间的连接这样的固有不对称和移动主机等情形，不对称路由会成为起码要求之一。
规则是针对前缀组而不是单一前缀设定的，这些前缀组即为自治系统。
一个自治系统有一个全球唯一的号码（有时用自治系统N或自治系统号码来表示）与之对应，这一号码既用来交换外部路由信息（与相邻自治系统），又用做自治系统本身的标识符。
在路由术语中，一个自治系统在与其内部自治系统交换可达性信息时通常都使用一个或多个内部网关协议（IGP），参见"IGP讨论"。

4 分配自治系统时的常见错误
自治系统通常被混淆甚至误解为一种将属于同一管理区域内的一些前缀组合起来的便利方法，即使在这组前缀中存在不同的路由规则。毫无例外的是，一个自治系统必需有且仅有一种路由规则。
在创建自治系统时，必需进行详细的考虑和协调。仅为了避免一个自治系统而使用另一个自治系统，就好象最差情形时每类网络拥有一个自治系统（理想情况是每个自治系统拥有一个前缀，其包含多个长前缀）。这意味着，为了应用自治系统的创建和分配的规则，就需要做重新设计。然而，这样做也许是实现所需路由协议的唯一方法。
如果你正在设计一个自治系统，就应该仔细考虑在你的注册权力内，如何正确的注册定制的CIDR块，以使你的自治系统登记的前缀数量最小。理想世界中，这一数量应该，也可能与1同数量级。
一些路由器实例用自治系统数目作为一种标记方式来区分内部和外部路由过程。除非与其他自治系统进行信息交换，否则这一标记并不需要是全局唯一的。

5 决策规则--我需要一个自治系统吗？
* 外部路由信息交换
为了通过外部路由协议与自治系统交换外部路由信息，必须使用自治系统。当前建议使用的外部路由协议是BGP，即边界网关协议。然而，单是外部路由信息交换本身并不构成对自治系统的需求。见下面"实例"的阐述。
* 单自治系统，多前缀
一个一般性的规则是，应该在一个自治系统内放置尽可能多的前缀。前提条件是这些前缀都符合同一路由协议。
* 唯一路由协议
自治系统只在路由协议与边界网关对不同时需要。这里路由协议指因特网的其它部分如何基于来自自治系统的信息做出路由安排。下文中"简单实例"给出了这一规则应用的确切方法。
5.1 简单实例
* 单址，单前缀
隔离的自治系统是没有用处的。前缀应该被放置于供应者的自治系统中。地址前缀与地址服务提供者的其他用户拥有相同的路由协议。且没有必要对路由信息进行区分。
这一意见也许与其它的有些背道而驰，但它强调了将自治系统编号作为与一些管理用途相对的一种路由策略来表示的明确的差别。
在某些情况下，对于一个站点，或者站点的一部分，会发现使用与提供者或站点其它部分不同的策略是必需的。在这种情况下，必须为受到影响的前缀创建单独的自治系统。这一情形很少见，几乎不可能发生。为数极少的桩站点需要与其父站点不同的路由策略。因为自治系统是策略的单元。但这种情况还是经常发生的。
* 单址，多前缀
同样的，隔离的自治系统并不是必需的。前缀请处于站点提供者的一个自治系统中。
* 多址情况
这里的多址是指与超过一个服务提供者相连的一个或一组前缀。它并不是为了恢复能力而运行IGP的多址网络。
这时需要一个自治系统。站点的前缀应成为单一自治系统的一部分，并与它的服务提供者的自治系统有所区别。这使得用户能够从不同的服务提供者处得到不同的策略和偏好表示。
这几乎是网络创建者给出自己的自治系统序号的唯一情况。站点应保证其具有足够的工具来运行适合的路由协议，如BGP4。
5.2 其它因素
* 拓扑
诸如分布、AUP兼容和网络拓扑等路由策略可以影响自治系统创建的结果。然而，这些工作时常没有根据由因特网其它部分增加的附加信息而得出的路由策略是否需要一个自治系统。基于这些规则创建自治系统时，应加以仔细考虑。
* 转换/"未来情形的验证"
通常一个站点与某个服务提供者相连，同时，该站点在将来还可能在同样的地方与另外一个服务提供者相连。但并不能因此而创建不需要的自治系统。自治系统的数量空间是有限的。当站点与另外一个服务提供者连接时所需的重组次数的限制应在转换的过程中当作一个很自然的步骤来考虑。
* 历史
自治系统数目的申请窗格与路由策略并无不同。自治系统时常因作为连接至因特网的步骤的一部分而被创建。本文应作为今后申请窗格的参考，使得大家明确何时需要创建自治系统。
6 思考
1） 如果供应商A和B拥有一大块资源，同时许多客户在两者之间是多址的，则有必要将所有的客户都置于同一个自治系统中。然而，值得指出的是，除非很实际，并且客户与服务提供者之间是完全平等的时候，才应该如此处理。
2） 站点并不应为使其它外部站点可基于自治系统策略进行决策而被强迫放置于一个隔离的自治系统中，然而，偶然也因策略原因而需要将一个自治系统或一个前缀分到两个自治系统中。这时制定外部策略是可能会要求网络创建者进行如此的自治系统更改。但最终的决策还是取决于管理被讨论的前缀的那些网络创建者以及包含他们的自治系统本身。当然，这是一种替换。它并不总是可以实施所有希望的路由策略。
7 一个前缀，一个初始自治系统
一般来说，一个前缀应唯一属于一个自治系统。这是由于在因特网的每一处，都确定有一个说明通信去往每一前缀的路由策略。当两个自治系统之间存在一个被相邻对使用的前缀时，应有意识地确定这一前缀实际存在与哪个自治系统。
引入聚合之后，应该指出的是，一个前缀可表现为存在与多个自治系统中。但这是非常少的特例。比如在初始系统遗失的时候，在BGP中使用AS_SET进行聚合。有的时候，如果在设置ATOMIC_AGGREGATE属性是缺少特定的聚合声明是，初始自治系统就可能完全遗失。
8 IGP问题
如上所述，很多路由器提供者都需要一个标识符来标记他们的IGP过程。然而，这一标识符并不需要全局唯一。实际上，这个信息永不会被外部路由协议发现。如果已经运行有一个外部路由协议，则有相当的理由用你自治系统号作为IGP标识符。如果不这样，从私有使用范围中选择也是可行的。注册一个自治系统号，靠运行一个IGP是不够的。
BGP4的出现使得必须使用一个IGP来传送无类的路由。例子参见OSPF[OSPF]和ISIS[ISIS]。
9 自治系统的空间开销
自治系统号是一个有限数量的地址空间。目前被定义为一个16为整数。因此，自治系统号的数目只有65535和。编写本文的时候，已经分配了5100个自治系统，同时600以下的一些自治系统在因特网中非常活跃。很明显，这一增长需要持续的监视。然而，如果都遵守上述规则的话，自治系统空间开销并不会立刻受到威胁。我们希望IDRP能够在这一问题出现之前被实施。IDRP对一个RDI的尺寸没有严格的限制。
10 保留的自治系统号
IANA将如下数字保留为私用，不允许在因特网上公开：
从64512 至 65535
11 安全性考虑
关于自治系统的选择方面需要考虑的安全性问题不多。
自治系统号对于所有者的映射是公用知识，试图对其进行修改只会导致在因特网
上发送IP包的混乱。
12 致谢
本文大部分基于[RIPE-109]，并在一个比RIPE更大的范围内使用。本文的编写与[RIPE-109] 联系密切。
13 参考文献
[RIPE-109]
        Bates, T., Lord, A., "Autonomous System Number Application
        Form & Supporting Notes", RIPE 109, RIPE NCC, 1 March 1994.
        URL: ftp://ftp.ripe.net/ripe/docs/ripe-109.txt.

[BGP-4]
        Rekhter, Y. and T. Li, "A Border Gateway Protocol 4 (BGP-4)",
        RFC 1654, T.J. Watson Research Center, cisco Systems, July 1994.

[EGP]
        Mills, D., "Exterior Gateway Protocol Formal Specifications",
        STD 18, RFC 904, International Telegraph and Telephone Co.,
        April 1984.

[IDRP]
        Kunzinger, C., Editor, "OSI Inter-Domain Routing Protocol
        (IDRP)", ISO/IEC 10747, Work In Progress, October 1993.

[CIDR]
        Fuller, V., T. Li, J. Yu, and K. Varadhan, "Classless
        Inter-Domain Routing (CIDR): an Address Assignment and
        Aggregation Strategy", RFC 1519, BARRnet, cisco, MERIT, OARnet,
        September 1993.

[OSPF]
        Moy, J., "OSPF Version 2", RFC 1583, March 1994.

[ISIS]
        Callon, R., "Use of OSI IS-IS for Routing in TCP/IP and Multi-
        Protocol Environments", RFC 1195, Digital Equipment
        Corporation, December 1990.
作者的地址
John Hawkinson
BBN Planet Corporation
150 CambridgePark Drive
Cambridge, MA 02139

Phone:  +1 617 873 3180
EMail: jhawk@bbnplanet.com


Tony Bates
MCI
2100 Reston Parkway
Reston, VA 22094

Phone: +1 703 715 7521
EMail: Tony.Bates@mci.net


RFC1930   Guidelines for creation, selection, and registrationof an Autonomous System (AS)
RFC1930   自治系统的创建、选择与注册指南




1
RFC文档中文翻译计划


